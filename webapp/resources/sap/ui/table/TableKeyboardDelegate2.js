/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/base/Object','./library','./TableExtension','./TableUtils'],function(q,B,l,T,a){"use strict";var b=B.extend("sap.ui.table.TableKeyboardDelegate2",{constructor:function(t){B.call(this);},destroy:function(){B.prototype.destroy.apply(this,arguments);},getInterface:function(){return this;}});b._restoreFocusOnLastFocusedDataCell=function(t,e){var i=a.getFocusedItemInfo(t);var L=t._getKeyboardExtension()._getLastFocusedCellInfo();a.focusItem(t,i.cellInRow+(i.columnCount*L.row),e);};b._setFocusOnColumnHeaderOfLastFocusedDataCell=function(t,e){var i=a.getFocusedItemInfo(t);a.focusItem(t,i.cellInRow,e);};b._forwardFocusToTabDummy=function(t,s){t._getKeyboardExtension()._setSilentFocus(t.$().find("."+s));};b.prototype.onfocusin=function(e){if(e.isMarked("sapUiTableIgnoreFocusIn")){return;}var t=q(e.target);if(t.hasClass("sapUiTableCtrlBefore")){b._setFocusOnColumnHeaderOfLastFocusedDataCell(this,e);}else if(t.hasClass("sapUiTableCtrlAfter")){b._restoreFocusOnLastFocusedDataCell(this,e);}};b.prototype.onsaptabnext=function(e){var i=a.getCellInfo(e.target)||{};if(i.type===a.CELLTYPES.COLUMNHEADER||i.type===a.CELLTYPES.COLUMNROWHEADER){b._restoreFocusOnLastFocusedDataCell(this,e);e.preventDefault();}else if(i.type===a.CELLTYPES.DATACELL||i.type===a.CELLTYPES.ROWHEADER){b._forwardFocusToTabDummy(this,"sapUiTableCtrlAfter");}};b.prototype.onsaptabprevious=function(e){var i=a.getCellInfo(e.target)||{};if(i.type===a.CELLTYPES.DATACELL||i.type===a.CELLTYPES.ROWHEADER){if(this.getColumnHeaderVisible()){b._setFocusOnColumnHeaderOfLastFocusedDataCell(this,e);e.preventDefault();}else{b._forwardFocusToTabDummy(this,"sapUiTableCtrlBefore");}}};b.prototype.onsapdown=function(e){var i=a.getCellInfo(e.target)||{};if(i.type===a.CELLTYPES.DATACELL||i.type===a.CELLTYPES.ROWHEADER){if(a.isLastScrollableRow(this,e.target)){var s=a.scroll(this,true,false);if(s){e.setMarked("sapUiTableSkipItemNavigation");}}}else if(i.type===a.CELLTYPES.COLUMNROWHEADER){if(this.getColumnHeaderVisible()&&this._getHeaderRowCount()>1){e.setMarked("sapUiTableSkipItemNavigation");a.focusItem(this,this._getHeaderRowCount()*(a.getVisibleColumnCount(this)+1),e);}}};b.prototype.onsapup=function(e){var i=a.getCellInfo(e.target)||{};if(i.type===a.CELLTYPES.DATACELL||i.type===a.CELLTYPES.ROWHEADER){if(a.isFirstScrollableRow(this,e.target)){var s=a.scroll(this,false,false);if(s){e.setMarked("sapUiTableSkipItemNavigation");}}}};return b;});
